<div id="leakage">

  <div id="filters" class="col-md-3"><!-- filter controls -->

<br>
<br>
<br>

    <form>

      <fieldset> 

        <h4> Patient Type </h4>
        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isPatManagedSelected"   
                 ng-change="months = calcMonthlyTotals()"> Managed
        </label>
        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isPatUnmanagedSelected" 
                 ng-change="months = calcMonthlyTotals()"> Unmanaged
        </label>

        <br>
        <h4> Physician Type </h4>
        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isPhyEmployedSelected"
                 ng-change="months = calcMonthlyTotals()"> Employed 
        </label>

        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isPhyAffiliatedSelected"
                 ng-change="months = calcMonthlyTotals()"> Affiliated
        </label>

        <br>
        <h4> Services </h4>
        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isSvcOfferedSelected"
                 ng-change="months = calcMonthlyTotals()"> Offered
        </label>
        <label class="checkbox">
          <input type="checkbox" 
                 ng-model="isSvcNotOfferedSelected"
                 ng-change="months = calcMonthlyTotals()"> Not offered
        </label>

      </fieldset>

    </form>

  </div>

  <div id="datatable" class="col-md-5"><!-- table of data -->

    <h3 class="text-center">Leakage by Month</h3>

    <table class="table table-striped table-bordered" width="100%">

      <tr>
        <th class="text-center" width="33%"> Month               </th>
        <th class="text-center" width="33%"> In <br> Network     </th>
        <th class="text-center" width="33%"> Out of <br> Network </th>
      </tr>

      <tbody ng-init="months = calcMonthlyTotals( isPatManagedSelected, isPatUnmanagedSelected, isPhyEmployedSelected, isPhyAffiliatedSelected, isSvcOfferedSelected, isSvcNotOfferedSelected )">

        <tr class="text-right" ng-repeat="month in months"> 

          <td class="text-right"> {{ month[ 3 ].format("MMM YYYY") }} </td> 

          <td class="text-right"> {{ month[ 1 ] | currency }}           </td> 
          <td class="text-right"> {{ month[ 2 ] | currency }}           </td> 

        </tr>
      </tbody>

      <tr>
        <th class="text-right" width="33%"> <b>Total ({{ countReduced }}) </th>
        <th class="text-right" width="33%"> {{ totalReducedIn  | currency }} </th>
        <th class="text-right" width="33%"> {{ totalReducedOut | currency }} </th>
      </tr>

    </table>

  </div>

  <div class="col-md-4"><!-- info -->

<br>
<br>
<br>

    <table id="info" class="small table" width="100%">

      <tr><td colspan="4" class="text-center">&nbsp;&nbsp;&nbsp;<b>Total Leakage</b></td></tr>

      <tr>
        <td> &nbsp; </td>
        <td class="text-right"> from </td>
        <td class="text-right"> {{ minDate.format( 'MMM YYYY' ) }}&nbsp;&nbsp;&nbsp; </td>
        <td> &nbsp; </td>
      </tr>
      <tr>
        <td> &nbsp; </td>
        <td class="text-right"> to </td>
        <td class="text-right"> {{ maxDate.format( 'MMM YYYY' ) }}&nbsp;&nbsp;&nbsp; </td>
        <td> &nbsp; </td>
      </tr>

      <tr><td colspan="3">&nbsp;</td></tr>

      <tr>
        <th width="20%"> &nbsp; </th>
        <th width="20%"> &nbsp; </th>
        <th width="30%"> IN     </th>
        <th width="30%"> OUT    </th>
      </tr>

      <tr>
        <td class="text-right"> Patients   </td><td>-&nbsp;Managed</td>
        <td class="text-right"> {{ totalManagedIn       | currency }} </td>
        <td class="text-right"> {{ totalManagedOut      | currency }} </td>
      </tr>
      <tr>
        <td>&nbsp;</td><td>-&nbsp;Unmanaged</td>
        <td class="text-right"> {{ totalUnmanagedIn     | currency }} </td>
        <td class="text-right"> {{ totalUnmanagedOut    | currency }} </td>
      </tr>

      <tr><td colspan="4">&nbsp;</td></tr>

      <tr>
        <td class="text-right"> Physicians </td><td>-&nbsp;Employed</td>
        <td class="text-right"> {{ totalEmployedIn      | currency }} </td>
        <td class="text-right"> {{ totalEmployedOut     | currency }} </td>
      </tr>
      <tr>
        <td>&nbsp;</td><td>-&nbsp;Affiliated</td>
        <td class="text-right"> {{ totalAffiliatedIn    | currency }} </td>
        <td class="text-right"> {{ totalAffiliatedOut   | currency }} </td>
      </tr>

      <tr><td colspan="4">&nbsp;</td></tr>

      <tr>
        <td class="text-right"> Services </td><td>-&nbsp;Offered</td>
        <td class="text-right"> {{ totalOfferedIn       | currency }} </td>
        <td class="text-right"> {{ totalOfferedOut      | currency }} </td>
      </tr>
      <tr>
        <td>&nbsp;</td><td>-&nbsp;Not&nbsp;Offered</td>
        <td class="text-right"> {{ totalNotOfferedIn    | currency }} </td>
        <td class="text-right"> {{ totalNotOfferedOut   | currency }} </td>
      </tr>

      <tr><td colspan="4">&nbsp;</td></tr>

      <tr>
        <td> &nbsp; </td>
        <td class="text-right"> <b>Total ({{ data.length }})</b>      </td>
        <td class="text-right"> {{ totalInNetwork       | currency }} </td>
        <td class="text-right"> {{ totalOutOfNetwork    | currency }} </td>
      </tr>

    </table>

  </div>

</div>

